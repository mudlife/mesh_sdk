C51 COMPILER V9.53.0.0   MAIN                                                              07/19/2019 11:47:17 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE src\main.c LARGE OPTIMIZE(6,SPEED) BROWSE INCDIR(.\app;.\dev;.\os;.\inc)
                    - DEFINE(LOG,LIGHT) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2           * @file main.c
   3           * @brief 主函数文件
   4           * @mainpage Mesh SDK 开发文档
   5           * @author mudlife \n
   6           * @email mudlifez@wearlinks.com
   7           * @par Copyright (c):
   8           *      上海晶曦微电子科技有限公司
   9           * @version 1.0.0
  10           * @date 2019-06-02
  11           * @details 该文档帮助客户快速进行二次开发 
  12           * @par 程序架构：
  13           * @code
  14           *  
  15           |    |     |    |
  16           |    |  APP  |    |
  17           |    |___________|    |
  18           |   D  |       |    |
  19           |    |  NET  | O  |
  20           |    |___________|    |
  21           |   E  |     |    |
  22           |    |  MAC  | S  |
  23           |    |___________|    |
  24           |   V  |     |    |
  25           |    |  PHY  |    |
  26           |    |         |        |
  27           * @endcode
  28           * PHY,MAC,NET,OS层不对用户开放，用户主要在APP层进行开发 @see netstack_app.c  \n
  29           * netstack_app.c文件中有三个重要的函数，分别是 app_init,app_input,app_output. \n
  30           * app_init函数是应用层的初始化函数， \n
  31           * app_input函数由net层调用，用来处理指令， \n
  32           * app_output函数是应用层用来发送数据的。 \n
  33           */
  34          #define ALLOCATE_EXTERN
  35          #include "HC89S003F4.h"
  36          #include "network_conf.h"
  37          #include "netstack_app.h"
  38          
  39          #include "system.h"
  40          #include <string.h>
  41          #include "os.h"
  42          #include "spi.h"
  43          
  44          /**
  45           * @brief 主函数
  46           *
  47           * @return 无
  48           */
  49          void main()
  50          {
  51   1        system_init(); //系统初始化
  52   1        spi_init();   //SPI初始化
  53   1        phy_init();  //物理层初始化
  54   1        os_init();    //OS初始化
C51 COMPILER V9.53.0.0   MAIN                                                              07/19/2019 11:47:17 PAGE 2   

  55   1        mac_init();  //MAC层初始化
  56   1        net_init();  //网络层初始化
  57   1        app_init();  //应用层初始化
  58   1        wdt_init();   //看门狗初始化
  59   1        
  60   1        while(1){
  61   2          WDTC |= 0x10;    //清狗
  62   2          mac_process();
  63   2          os_task_remark(); //任务更新
  64   2          os_task_process();//任务进程
  65   2          app_process();//应用层进程
  66   2      
  67   2        
  68   2        }
  69   1          
  70   1      }
  71          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     42    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
